<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="referrer" content="no-referrer" />
    <title>Shaka Player with Clear Key Encryption</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.1.0/shaka-player.compiled.js" crossorigin="anonymous"></script>
</head>
<body>

    <video id="videoPlayer" controls width="640" height="360"></video>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var video = document.getElementById('videoPlayer');
            var player = new shaka.Player(video);

            // Example Clear Key data
            var clearKeys = {
                'keys': [
                    {
                        'kty': 'oct',
                        'k': '51Fl04uQlWfAM1OuSye2+A', // Replace with your actual base64-encoded key
                        'kid': 'AesRaCCJQPiycLTgmUVw5w' // Replace with your actual base64-encoded key ID
                    }
                ]
            };
console.log('here 1111');  
            // Add event listener for error handling
            player.addEventListener('error', function(event) {
                console.error('Error code', event.detail.code, 'object', event.detail);
            });
console.log('here 2222');  
            // Clear Key configuration
            var config = {
                drm: {
                    clearKeys: clearKeys.keys.reduce((keys, key) => {
                        keys[key.kid] = key.k;
			console.log(keys);    
                        return keys;
                    }, {})
                }
            };

            player.configure(config);

            // Load the manifest file
            player.load('https://d1yws6emo43ny.cloudfront.net/CH1/masterCH1.mpd').then(function() {
                console.log('The video has now been loaded!');
            }).catch(function(error) {
                console.error('Error loading the video', error);
            });
        });
    </script>

</body>
</html>
